window.ThreeMice=window.ThreeMice||{},ThreeMice.Events={MOUSEOVER:"mouseover",MOUSEOUT:"mouseout"},ThreeMice.Options={callbackType:"function"},ThreeMice.log=function(a){console.log("ThreeMice: "+a)},ThreeMice.hasMouseOver=function(a){var b=!1;return a&&typeof a.mouseover===ThreeMice.Options.callbackType&&(b=!0),b},ThreeMice.hasMouseOut=function(a){var b=!1;return a&&typeof a.mouseout===ThreeMice.Options.callbackType&&(b=!0),b},ThreeMice.Mouse=function(a){function b(a){a&&(a.container&&(k.container=a.container,k.container!==document.body&&(k.offset=k.container.getBoundingClientRect())),a.size?k.size=a.size:k.container===document.body?(k.size.width=window.innerWidth,k.size.height=window.innerHeight):(k.size.width=k.container.clientWidth,k.size.height=k.container.clientHeight),a.camera&&(k.camera=a.camera),a.object3d&&(k.object3d=a.object3d),a.recursive&&(k.recursive=a.recursive))}function c(a){k.mouse.position.x=(a.clientX-k.offset.left+document.body.scrollLeft)/k.size.width*2-1,k.mouse.position.y=2*-((a.clientY-k.offset.top+document.body.scrollTop)/k.size.height)+1}function d(){k.mouse.intersected&&ThreeMice.hasMouseOut(k.mouse.intersected)&&k.mouse.intersected.mouseout(k.mouse.intersected),k.mouse.intersected=null}function e(a){ThreeMice.hasMouseOver(a)&&a.mouseover(a),k.mouse.intersected=a}function f(a){if(k.enabled&&k.enabledEvents.mouseover){c(a);var b=h();b?(ThreeMice.hasMouseOver(b)||ThreeMice.hasMouseOut(b))&&b!==k.mouse.intersected&&(d(),e(b)):d()}}function g(a){k.enabled&&k.enabledEvents.mouseover&&d()}function h(){var a=null,b=new THREE.Vector3(k.mouse.position.x,k.mouse.position.y,1);b.unproject(k.camera);var c=new THREE.Raycaster(k.camera.position,b.sub(k.camera.position).normalize()),d=c.intersectObjects(k.object3d.children,k.recursive);return d.length>0&&(a=d[0].object),a}function i(){k.container&&(k.container.addEventListener("mousemove",f,!1),k.container.addEventListener("mouseout",g,!1))}function j(a){b(a),k.camera&&k.object3d?i():(k.enabled=!1,k.camera||ThreeMice.log("Camera was not defined."),k.object3d||ThreeMice.log("Object3D was not defined."))}var k=this;this.container=document.body,this.offset={top:0,left:0},this.size={width:0,height:0},this.camera=null,this.object3d=null,this.recursive=!1,this.mouse={position:{x:-1,y:-1},intersected:null},this.enabled=!0,this.enabledEvents={mouseover:!1},this.set=function(a){return a.on=function(b,c){a[b]=c,b!==ThreeMice.Events.MOUSEOVER&&b!==ThreeMice.Events.MOUSEOUT||(k.enabledEvents.mouseover=!0)},a},j(a)};